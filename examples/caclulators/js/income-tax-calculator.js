var step1 = document.querySelector(".step-1 .commen-btn"); let isValidate, step2 = document.querySelector(".step-2 .commen-btn"), step3 = document.querySelector(".step-3 .commen-btn"), step4 = document.querySelector(".step-4 .commen-btn"), step5 = document.querySelector(".step-5 .commen-btn"), residencetypeBtns = document.querySelectorAll("[name=residence_type]"), occupationBtns = document.querySelectorAll("[name=occupation]"), salaryTypeBtns = document.querySelectorAll("[name=salary_type]"), selectedOccupationType = document.querySelector("[name=occupation]:checked").value, salariedFormSteps = [1, 2, 3, 4, 5, 6], selfEmpFormSteps = [1, 3, 4, 5, 6], step2_sum = 0, step3_sum = 0, step4_sum = 0, step5_sum = 0, hra_exemption = 0, standard_exemption = 5e4, net_deduction = 0, CITY_TYPE = { METRO: { id: 1 }, NON_METRO: { id: 2 } }, RESIDENCE_TYPE = { SELF_OWNED: { id: 1 }, RENTED: { id: 2 } }, OCCUPATION = { SALARIED: { id: 1 }, SELF_EMPLOYED: { id: 2 } }, SALARY_TYPE = { MONTHLY: { id: 1 }, ANNUALLY: { id: 2 } }, AGE_GROUP = { BELOW_SIXTY: { id: 1 }, BELOW_EIGHTY: { id: 2 }, ABOVE_EIGHTY: { id: 3 } }, PARENT_AGE_GROUP = { BELOW_SIXTY: { id: 1 }, ABOVE_SIXTY: { id: 2 } }; function renderSelfOwnedView() { document.getElementById("annualRent").value = "", document.getElementById("annualRentBox").classList.add("display-none"), document.getElementById("annualRent").classList.remove("commen-input"), document.getElementById("annualRent").nextElementSibling.classList.remove("show-error", "commen-error"), document.querySelector(".step-1 .calc-btn-box").classList.remove("rquired") } function renderSelfEmployedView() { document.getElementById("basicSalary").value = "", document.getElementById("hraReceived").value = "", document.getElementById("dearnessAllowance").value = "", document.getElementById("specialAllowance").value = "", document.getElementById("employeeEpfContribution").value = "", document.getElementById("expensesRelated").classList.remove("display-none"), document.getElementById("changeSalaryType").innerHTML = "Annual Gross income*", document.getElementById("grossSalary").setAttribute("placeholder", "Annual Gross income"), document.querySelector(".tab-list.occupation-" + OCCUPATION.SALARIED.id).classList.add("display-none"), document.querySelector(".tab-list.occupation-" + OCCUPATION.SELF_EMPLOYED.id).classList.remove("display-none"), document.querySelector(".step-2.step-inner-box").classList.add("display-none"); var e = document.querySelector(".step-2.step-inner-box .gross-salary-parent"), t = document.querySelector(".step-3 .calculator-form").children[0]; document.querySelector(".step-3 .calculator-form").insertBefore(e, t), document.querySelector(".step-3").children[0].style.display = "none", document.querySelector(".step-3.step-inner-box").classList.add("show-section", "fadeInRight", "selfEmp"), document.querySelector(".gross-salary-parent input").removeAttribute("readonly"), document.querySelector(".gross-salary-parent label.floating-label").classList.toggle("non-floating") } function renderAnnualSalaryView() { document.getElementById("basic").innerText = "Annual Basic Salary*", document.getElementById("hra").innerText = "Annual HRA received*", document.getElementById("dearness").innerText = "Annual Dearness allowance", document.getElementById("special").innerText = "Annual Special allowance", document.getElementById("epf").innerText = "Annual Employee EPF contribution by self", document.getElementById("changeSalaryType").innerText = "Annual Gross Salary*" } if (step1.addEventListener("click", function () { validateField(1) }), step2.addEventListener("click", function () { validateField(2) && calculateSalaryTotal() }), step3.addEventListener("click", function () { validateField(3) && calculateIncomeTotal() }), step4.addEventListener("click", function () { validateField(4) }), step5.addEventListener("click", function () { validateField(5) && (calculateDeductions(), updateNetPayable()) }), [document.querySelector("#user_age"), document.querySelector(".dropdown-arrow")].forEach(function (e) { e.addEventListener("click", function () { document.querySelector(".dropdown-elem-age").style.display = "block" }) }), document.querySelector(".dropdown-elem-age").addEventListener("click", function (e) { var t = 1; e.target.classList.contains("item") && (document.querySelector("#user_age").value = e.target.innerText, t = e.target.classList.contains("item-1") ? 1 : e.target.classList.contains("item-2") ? 2 : 3, document.querySelector("#user_age").setAttribute("data-value", t), document.querySelector(".dropdown-elem-age").style.display = "none") }), "loading" == document.readyState) { var residenceTarget = document.querySelector("[name=residence_type]:checked"), occupationTarget = document.querySelector("[name=occupation]:checked"), salaryTarget = document.querySelector("[name=salary_type]:checked"); "1" == residenceTarget.value && renderSelfOwnedView(), "2" == occupationTarget.value && renderSelfEmployedView(), "2" == salaryTarget.value && renderAnnualSalaryView() } function validateField(e) { let t = "." + document.querySelector(".step-" + e).classList[0], n = document.querySelectorAll(t + " .commen-error"); var a = !1; if (isValidate = !0, document.querySelectorAll(t + " .commen-input").forEach(function (e) { return "annualRent" == e.id && "0" == e.value ? (e.nextElementSibling.classList.add("show-error"), e.nextElementSibling.innerHTML = e.getAttribute("placeholder") + " cannot be zero", e.nextElementSibling.style.visibility = "visible", isValidate = !1) : "" == e.value ? (e.nextElementSibling.classList.add("show-error"), e.nextElementSibling.innerHTML = e.getAttribute("placeholder") + " is required", e.nextElementSibling.style.visibility = "visible", isValidate = !1) : void (isValidate && (e.nextElementSibling.classList.remove("show-error"), e.nextElementSibling.innerHTML = "", e.nextElementSibling.style.visibility = "hidden")) }), n.forEach(function (e) { e.classList.contains("show-error") && (a = !0) }), !a) { document.querySelector(".step-" + e).classList.remove("show-section", "fadeInRight"), document.getElementById("taxForm").classList.remove("display-none"); let t = document.querySelector(".tab-list.occupation-" + selectedOccupationType + " li.active"); t && t.classList.remove("active"); let n = selectedOccupationType == OCCUPATION.SALARIED.id ? salariedFormSteps : selfEmpFormSteps, a = n.indexOf(e); document.querySelector("ul.tab-list.occupation-" + selectedOccupationType + " #step-" + (a + 2)).classList.add("active", "active-list"), document.querySelector(".step-" + n[a + 1]).classList.add("show-section", "fadeInRight") } return isValidate } function calculateTax(e) { let t = 0, n = 0, a = [], o = 0; if (e > a[0].salary) { for (e > a[o].salary && (n = 0, t = a[o], o++); e < a.length;)income > a[o].salary && (n += (a[o].salary - a[o - 1].salary) * a[o - 1].tax, t = a[o]), o++; n += (e - t.salary) * t.tax } n.toFixed(2), document.querySelectorAll(".totalTaxtoPay").forEach(function (e) { e.innerHTML = "<span>&#x20B9;</span>" + n }) } function residenceChangeEvent(e) { e.target.value == RESIDENCE_TYPE.RENTED.id ? (document.getElementById("annualRent").value = "", document.getElementById("annualRentBox").classList.remove("display-none"), document.getElementById("annualRent").classList.add("commen-input"), document.getElementById("annualRent").nextElementSibling.classList.add("show-error", "commen-error"), document.querySelector(".step-1 .calc-btn-box").classList.add("rquired")) : renderSelfOwnedView() } function occupationChangeEvent(e) { if (selectedOccupationType = document.querySelector("[name=occupation]:checked").value, e.target.value == OCCUPATION.SELF_EMPLOYED.id) renderSelfEmployedView(); else { document.getElementById("expensesRelated").classList.add("display-none"), document.getElementById("changeSalaryType").innerHTML = "Gross salary*", document.getElementById("grossSalary").setAttribute("placeholder", "Gross salary"), document.querySelector(".step-2.step-inner-box").classList.remove("display-none"), document.querySelector(".tab-list.occupation-" + OCCUPATION.SALARIED.id).classList.remove("display-none"), document.querySelector(".tab-list.occupation-" + OCCUPATION.SELF_EMPLOYED.id).classList.add("display-none"); var t = document.querySelector(".step-3.step-inner-box .gross-salary-parent"), n = document.querySelector(".step-2 .calculator-form .calc-btn-box"); document.querySelector(".step-2 .calculator-form").insertBefore(t, n), document.querySelector(".step-3.step-inner-box").classList.remove("show-section", "fadeInRight", "selfEmp"), document.querySelector(".gross-salary-parent input").setAttribute("readonly", ""), document.querySelector(".gross-salary-parent label.floating-label").classList.toggle("non-floating"), document.querySelector(".step-2.step-inner-box").classList.remove("display-none"), document.querySelector(".step-3").children[0].style.display = "block" } } function salaryChangeEvent(e) { "salaried" == e.target.id ? (document.getElementById("basic").innerText = "Monthly Basic Salary*", document.getElementById("hra").innerText = "Monthly HRA received*", document.getElementById("dearness").innerText = "Monthly Dearness allowance", document.getElementById("special").innerText = "Monthly Special allowance", document.getElementById("epf").innerText = "Monthly Employee EPF contribution by self", document.getElementById("changeSalaryType").innerText = "Monthly Gross Salary*") : renderAnnualSalaryView(), selectedOccupationType == OCCUPATION.SALARIED.id && updateGrossSalary() } tabListEvent(), residencetypeBtns.forEach(function (e) { e.addEventListener("change", residenceChangeEvent) }), occupationBtns.forEach(function (e) { e.addEventListener("change", occupationChangeEvent) }), salaryTypeBtns.forEach(function (e) { e.addEventListener("click", salaryChangeEvent) }); let addOnther = document.querySelectorAll(".addOnther"); function dropDownFunction(e) { document.querySelectorAll("#" + e + " .dropdown-elem li").forEach(function (t) { t.addEventListener("click", function (t) { let n = t.target.getAttribute("select-option"), a = document.getElementById(n); a.classList.remove("display-none"), t.target.classList.add("display-none"); let o = document.querySelector("#" + e); document.querySelector(".step-" + ("dropdownFrom" == e ? 4 : 5) + " .calculator-form").insertBefore(a, o), document.querySelectorAll("#" + e + " .dropdown-elem li.display-none").length == document.querySelectorAll("#" + e + " .dropdown-elem li").length && (document.querySelector("#" + e).classList.add("display-none"), document.querySelector("[data-dropdown-id=" + e + "]").classList.add("display-none")) }) }) } function updateGrossSalary() { calculateSalaryTotal(); var e = document.querySelector("[name=salary_type]:checked").value, t = step2_sum; e == SALARY_TYPE.MONTHLY.id && (t /= 12), document.querySelector("#grossSalary").value = 0 == t ? "" : t } function calculateSalaryTotal() { var e = 1, t = document.querySelector("[name=salary_type]:checked").value, n = +document.querySelector("#basicSalary").value, a = +document.querySelector("#hraReceived").value, o = +document.querySelector("#dearnessAllowance").value, l = +document.querySelector("#specialAllowance").value, r = +document.querySelector("#employeeEpfContribution").value; t == SALARY_TYPE.MONTHLY.id && (e = 12), step2_sum = (n + a + o + l + r) * e, updateHraExemption((n + o) * e, a * e) } function updateHraExemption(e, t) { var n = 0; if (document.querySelector("[name=residence_type]:checked").value == RESIDENCE_TYPE.RENTED.id) if (n = +document.querySelector("#annualRent").value, selectedOccupationType == OCCUPATION.SELF_EMPLOYED.id) hra_exemption = n > 6e4 ? 6e4 : n; else { var a = 0; a = document.querySelector("[name=city_type]:checked").value == CITY_TYPE.METRO.id ? .5 * e : .4 * e; var o = n - .1 * e; hra_exemption = (hra_exemption = t < o ? t < a ? t : a : o < a ? o : a) < 0 ? 0 : hra_exemption } else hra_exemption = 0 } function calculateCapitalGainTax() { var e = +document.querySelector("#longEquityGain").value, t = +document.querySelector("#shortEquityGain").value, n = +document.querySelector("#longDebtGain").value, a = +document.querySelector("#shortDebtGain").value, o = +document.querySelector("#longUnlistedGain").value, l = +document.querySelector("#shortUnlistedGain").value, r = n + o + +document.querySelector("#longRealEstateGain").value, c = a + l + +document.querySelector("#shortRealEstateGain").value; return { debtLong: .2 * r, debtShortTotal: c, equityLong: e > 1e5 ? .1 * (e - 1e5) : 0, equityShort: .15 * t, netGains: r + c + e + t } } function calculateIncomeTotal() { if (selectedOccupationType == OCCUPATION.SELF_EMPLOYED.id) { step2_sum = +(document.querySelector("#grossSalary").value || 0); document.querySelector("[name=salary_type]:checked").value } step3_sum = +document.querySelector("#incomeOnInterestSaving").value + .7 * +document.querySelector("#incomFromRental").value + +document.querySelector("#interestFromDeposit").value + +document.querySelector("#otherIncome").value } function calculateDeductions() { var e = document.querySelector("#user_age").getAttribute("data-value"), t = 5e4, n = document.querySelector("[name=parents_age]:checked").value, a = 5e4; e == AGE_GROUP.BELOW_SIXTY.id && (t = 25e3), n == PARENT_AGE_GROUP.BELOW_SIXTY.id && (a = 25e3); var o = +document.querySelector("#deduction80C").value, l = +document.querySelector("#deduction80D").value, r = +document.querySelector("#deduction80CCD1B").value, c = +document.querySelector("#donationCharity").value, i = +document.querySelector("#educationLoanInterest").value, u = +document.querySelector("#homeLoanInterestForSelfOccupied").value, d = +document.querySelector("#homeLoanInterestForRented").value, s = +document.querySelector("#expensesRelatedToWork").value, m = +document.querySelector("#healthInsParentInput").value, y = +document.querySelector("#employeeEpfContribution").value; salaryType = document.querySelector("[name=salary_type]:checked").value, salaryType == SALARY_TYPE.MONTHLY.id && (y *= 12), o = y + o > 15e4 ? 15e4 : y + o, l = l > t ? t : l, m = m > a ? a : m, r = r > 5e4 ? 5e4 : r, u = u > 2e5 ? 2e5 : u, s = selectedOccupationType == OCCUPATION.SELF_EMPLOYED.id ? s : 0, net_deduction = o + l + r + c + i + u + d + s + m } function updateNetPayable() { var e = calculateCapitalGainTax(); document.querySelector("[name=residence_type]:checked").value; selectedOccupationType == OCCUPATION.SELF_EMPLOYED.id && updateHraExemption(); var t = step2_sum + step3_sum - net_deduction - hra_exemption - standard_exemption + e.debtShortTotal; t = t > 0 ? t : 0; var n = document.querySelector("#user_age").getAttribute("data-value"), a = 0; a = n == AGE_GROUP.BELOW_SIXTY.id ? getSlabTaxBelowSixty(t) : n == AGE_GROUP.BELOW_EIGHTY.id ? getSlabTaxBelowEighty(t) : getSlabTaxAboveEighty(t); var o = e.debtLong + e.equityLong + e.equityShort, l = +document.querySelector("#longEquityGain").value, r = l > 1e5 ? l - 1e5 : l, c = step2_sum + step3_sum + e.netGains - l + r - hra_exemption - standard_exemption - net_deduction <= 5e5 ? a + o - 12500 : a + o; c < 0 && (c = 0), c *= 1.04, document.querySelector("#netTotalTaxToPay").innerText = commaSeprated(Math.round(c)), document.querySelector("#grossIncome").innerText = commaSeprated(Math.round(step2_sum + step3_sum)), document.querySelector("#annualDeduction").innerText = commaSeprated(Math.round(net_deduction)), document.querySelector("#annualGains").innerText = commaSeprated(Math.round(e.netGains)), document.querySelector("#annualExemptions").innerText = commaSeprated(Math.round(hra_exemption + standard_exemption)) } function getMin(e, t) { return e < t ? e : t } function getMax(e, t) { return e > t ? e : t } function getSlabTaxBelowSixty(e) { var t = 0; return t += .05 * getMax(getMin(e - 25e4, 25e4), 0), t += .2 * getMax(getMin(e - 5e5, 5e5), 0), t += .3 * getMax(e - 1e6, 0) } function getSlabTaxBelowEighty(e) { var t = 0; return t += .05 * getMax(getMin(e - 2e5, 2e5), 0), t += .2 * getMax(getMin(e - 5e5, 5e5), 0), t += .3 * getMax(e - 1e6, 0) } function getSlabTaxAboveEighty(e) { var t = 0; return t += .2 * getMax(getMin(e - 5e5, 5e5), 0), t += .3 * getMax(e - 1e6, 0) } function tabListEvent() { document.querySelectorAll(".tab-list li").forEach(function (e) { e.classList.remove("active"), e.addEventListener("click", function (e) { let t = "step-" + +e.target.getAttribute("form-step"); "step-1" == t && document.querySelector(".calculator-inner-wrap.type2").classList.add("display-none"), fromSteps = parseInt(t.split("", 6).splice(5, 6)), document.querySelectorAll(".tab-list li").forEach(function (e) { e.classList.remove("active") }); let n = +e.target.id[5]; if ("1" == document.querySelector("[name=occupation]:checked").value) for (; n <= 6; n++)document.querySelector(".occupation-1 #step-" + n).classList.remove("active-list"); else for (; n <= 5; n++)document.querySelector(".occupation-2 #step-" + n).classList.remove("active-list"); e.target.classList.add("active", "active-list"), document.querySelectorAll("div[class*='step-']").forEach(function (e) { e.classList.remove("show-section", "fadeInRight") }), document.querySelectorAll(".error-text").forEach(function (e) { e.style.visibility = "hidden" }), document.querySelector("." + t).classList.add("show-section", "fadeInRight") }) }) } function commaSeprated(e) { let t = (e = e.toString()).substring(e.length - 3), n = e.substring(0, e.length - 3); return "" != n && (t = "," + t), n.replace(/\B(?=(\d{2})+(?!\d))/g, ",") + t } addOnther.forEach(function (e) { e.addEventListener("click", function (e) { let t = e.target.getAttribute("data-dropdown-id"); document.querySelector("#" + t + ">ul").style.display = "block", dropDownFunction(t) }) }), document.addEventListener("click", function (e) { e.target.classList.contains("addOnther") || document.querySelectorAll(".dropdown-elem").forEach(function (e) { e.style.display = "none" }), e.target.classList.contains("dropdown-arrow") || "user_age" == e.target.id || (document.querySelector(".dropdown-elem-age").style.display = "none") }), document.getElementById("recalculator").addEventListener("click", function () { document.querySelector(".step-1").classList.add("show-section", "fadeInRight"), document.getElementById("taxForm").classList.add("display-none"), document.querySelector(".step-6").classList.remove("show-section", "fadeInRight") }), document.querySelectorAll(".input-elmn").forEach(function (e) { e.addEventListener("input", function (e) { if (!e.data) return; var t = e.data.charCodeAt(0); let n = e.target, a = n.value; t > 31 && (t < 48 || t > 57) ? (n.nextElementSibling.innerHTML = "Fill only Number", n.nextElementSibling.classList.add("show-error"), n.nextElementSibling.style.visibility = "visible", a = a.slice(0, a.length - 1), isValidate = !1) : (e.target.nextElementSibling.classList.remove("show-error"), e.target.nextElementSibling.style.visibility = "hidden", "basicSalary" !== e.target.id && "hraReceived" !== e.target.id || (document.querySelector("#grossSalary").nextElementSibling.classList.remove("show-error"), document.querySelector("#grossSalary").nextElementSibling.style.visibility = "hidden")), e.target.value = a }) });
